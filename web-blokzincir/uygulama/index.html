<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <title>Ana Sayfa</title>
  <style>

body {

  flex-direction: column;
  justify-content: center;
  align-items: center;
text-align: center;
  height: 100vh; /* Ekran yüksekliği kadar yer kaplar */
  margin: 0;
}



    #map {
      height: 400px;
      width: 100%;
    }

    /* "Konum Al" butonunun pasif stilini tanımla */
    #getLocationBtn:disabled {
      background-color: #ccc; /* Pasif arka plan rengi */
      color: #666; /* Pasif metin rengi */
      cursor: not-allowed; /* Tıklanamaz imleci */
    }
  </style>
</head>

<body>
  <header>
    <b> <center> H A T T A &nbsp;&nbsp;  K A L !</center></b>
    <br>
    <nav>
      <ul>
        <li><a href="index.html">Acil Durum</a></li>
        <li><a href="bolgehaberleri.html">Bölge Haberleri</a></li>
        <li><a href="havadurumu.html">Hava Durumu</a></li>
        <li><a href="profilim.html">Profilim</a></li>
      </ul>
    </nav>
  </header>

  <div id="map" style="display:none;"></div>

  <script>
    var map, infoWindow, geocoder;

    function initMap() {
      map = new google.maps.Map(document.getElementById('map'), {
        center: { lat: -34.397, lng: 150.644 },
        zoom: 6
      });
      infoWindow = new google.maps.InfoWindow;
      geocoder = new google.maps.Geocoder;
    }

    function getLocation() {
      // "Konum Al" butonunu devre dışı bırak
      document.getElementById('getLocationBtn').disabled = true;

      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          showPosition,
          showError,
          {
            enableHighAccuracy: true,
            timeout: 10000,
            maximumAge: 0
          }
        );
      } else {
        document.getElementById("location").innerHTML = "Geolocation is not supported by this browser.";
      }
    }

    function showPosition(position) {
      var pos = {
        lat: position.coords.latitude,
        lng: position.coords.longitude
      };

      document.getElementById('map').style.display = 'block';

      infoWindow.setPosition(pos);
      infoWindow.setContent('Konum bulundu.');
      infoWindow.open(map);
      map.setCenter(pos);

      geocoder.geocode({ 'location': pos }, function (results, status) {
        if (status === 'OK') {
          if (results[0]) {
            var formattedAddress = results[0].formatted_address;
            var latitude = position.coords.latitude;
            var longitude = position.coords.longitude;

            document.getElementById('address').innerHTML = 'Adres: ' + formattedAddress;
            document.getElementById('latitude').innerHTML = 'Enlem: ' + latitude;
            document.getElementById('longitude').innerHTML = 'Boylam: ' + longitude;

            document.getElementById('useAddressButton').style.display = 'inline';
          } else {
            document.getElementById('address').innerHTML = 'Adres bulunamadı';
          }
        } else {
          document.getElementById('address').innerHTML = 'Geocoder failed due to: ' + status;
        }
      });
    }

    function showError(error) {
      switch (error.code) {
        case error.PERMISSION_DENIED:
          document.getElementById("location").innerHTML = "User denied the request for Geolocation."
          break;
        case error.POSITION_UNAVAILABLE:
          document.getElementById("location").innerHTML = "Location information is unavailable."
          break;
        case error.TIMEOUT:
          document.getElementById("location").innerHTML = "The request to get user location timed out."
          break;
        case error.UNKNOWN_ERROR:
          document.getElementById("location").innerHTML = "An unknown error occurred."
          break;
      }
    }

    function verifyLocation() {
      document.getElementById("verifiedLocation").innerHTML = document.getElementById("location").innerHTML;
    }
  </script>

  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBz8nZkg7mY9XmdSojGdP5YEBo1HoZW5jg&callback=initMap">
  </script>

  <h2>Kayıtlı Adresiniz:</h2>
  <p>Ev (Kızılay/Ankara) (İkametgah adresiniz)</p>

  <h3>Farklı bir konumda mısınız?</h3>
  <button id="getLocationBtn" class="cta-button" onclick="getLocation()">Konum Al</button>

  <br>
  <div id="address"></div>
  <div id="latitude"></div>
  <div id="longitude"></div><br>
  

  <button id="useAddressButton" class="cta-button" style="display:none;" onclick="verifyLocation()">Bu Adresi Kullan</button>
  <button onclick="verifyLocation()" class="cta-button" >Ev Adresini Kullan</button>
  <p id="verifiedLocation"></p>
</body>

</html>
